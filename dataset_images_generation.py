# -*- coding: utf-8 -*-

import Image, ImageFont, ImageDraw
import os
from os import listdir

characters = []
symbols = ['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J',
'K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g',
'h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','+','-','/','*',
'(', ')', '[', ']', '{', '}']


penalty = [5,10,17,21,23,28,32,33,42,49,53,55,61,66,75,79,82,93,94,96,98,99,103,105,106,108,116,118,122,126,127,128,129,133,140,141,142,144,147,148,150,156,161,163,165,166,168,169,147,180,181,182,189,190,193,197,198,200,202,204,206,207,209,212,213,215,216,220,226,231,234,235,255,256,260,262,264,269,270,271,274,281,284,285,292,293,297,301,302,306,308,309,320,322,330,332,334,339,341,345,347,350,351,356,366,368,377,380,383,386,388,389,390,392,393,399,402,406,407,408,409,432,434,438,440,441,446,448,450,455,457,458,464,466,472,475,477,480,483,484,489,491,494,503,506,507,508,514,519,521,531,543,547,548,557,562,564,569,574,576,577,579,580,583,585,586,588,597,600,603,604,606,613,622,624,627,636,639,642,646,648,652,654,665,666,667,675,681,683,688,690,693,695,697,701,703,709,710,732,733,737,738,740,744,749,754,755,756,758,762,764,765,770,773,783,787,795,796,798,799,803,804,807,811,819,821,826,830,834,835,844,846,847,852,854,858,860,864,868,877,879,880,881,886,893,898,903,907,911,915,918,922,928,937,943,944,947,949,950,954,961,962,963,965,967,969,975,976,977,982,993,994,996,1000,1008,1009,1010,1012,1015,1016,1019,1021,1025,1026,1027,1031,1032,1036,1052,1057,1070,1071,1072,1076,1082,1083,1089,1098,1100,1101,1103,1106,1110,1112,1119,1124,1128,1129,1131,1134,1136,1137,1145,1154,1155,1163,1164,1168,1171,1173,1175,1177,1180,1212,1215,1219,1222,1224,1232,1234,1235,1239,1240,1246,1248,1249,1252,1253,1255,1257,1261,1262,1264,1278,1295,1298,1309,1316,1319,1320,1322,1327,1329,1330,1334,1335,1340,1342,1352,1354,1372,1376,1377,1378,1388,1396,1399,1403,1407,1411,1412,1413,1415,1416,1417,1425,1427,1428,1433,1436,1444,1451,1455,1467,1476,1477,1478,1485,1488,1490,1498,1502,1513,1515,1516,1519,1521,1530,1541,1549,1557,1560,1561,1562,1563,1569,1570,1571,1572,1573,1584,1591,1593,1594,1598,1601,1603,1606,1615,1618,1619,1624,1627,1628,1629,1630,1637,1640,1645,1647,1654,1663,1664,1670,1676,1679,1680,1682,1686,1705,1710,1718,1723,1727,1733,1735,1738,1752,1757,1765,1771,1777,1778,1780,1787,1790,1791,1794,1795,1803,1813,1819,1825,1831,1832,1837,1843,1845,1848,1850,1851,1852,1867,1870,1871,1876,1884,1885,1887,1889,1891,1892,1901,1904,1912,1914,1916,1917,1920,1921,1924,1925,1929,1931,1932,1937,1940,1942,1955,1956,1957,1958,1960,1961,1965,1972,1974,1977,1981,1982,1984,1986,1988,1991,1993,2005,2008,2009,2011,2018,2021,2022,2024,2032,2033,2039,2040,2041,2044,2048,2053,2055,2057,2060,2067,2069,2075,2080,2081,2082,2083,2084,2086,2088,2093,2097,2099,2101,2102,2105,2109,2113,2115,2116,2118,2129,2142,2147,2150,2151,2159,2164,2168,2169,2171,2175]
allow = [19,20,22,27,34,39,40,45,46,47,48,57,58,62,69,71,86,101,102,121,139,145,153,167,172,173,177,187,191,192,194,195,211,214,221,238,239,240,246,250,242,252,263,401,412,414,419,420,422,424,427,429,430,436,445,447,460,463,469,493,498,501,502,516,517,518,525,526,529,534,539,554,556,558,559,560,565,567,572,575,595,605,609,614,620,631,633,638,647,650,662,664,668,670,671,678,704,713,714,718,736,739,746,760,761,766,772,778,779,780,793,785,788,789,806,814,824,832,839,840,841,857,866,874,876,878,883,896,900,901,905,909,9010,912,921,924,929,932,934,938,941,959,960,972,973,978,979,981,985,987,991,998,1001,1011,1033,1034,1039,1041,1045,1047,1045,1051,1059,1064,1073,1078,1092,1108,1114,1116,1118,1122,1126,1130,1132,1140,1143,1144,1157,1161,1167,1169,1186,1193,1195,1201,1203,1208,1217,1218,1223,1229,1231,1251,1265,1269,1270,1271,1272,1273,1274,1281,1282,1287,1291,1293,1297,1300,1304,1305,1307,1325,1326,1328,1338,1347,1348,1358,1362,1363,1364,1367,1370,1371,1379,1406,1419,1420,1429,1432,1434,1445,1447,1456,1462,1468,1469,1471,1472,1473,1489,1493,1499,1517,1520,1524,1528,1536,1537,1542,1543,1544,1546,1550,1552,1554,1555,1558,1565,1567,1577,1596,1616,1621,1636,1641,1642,1649,1653,1661,1672,1673,1683,1684,1695,1697,1701,1703,1704,1709,1719,1720,1724,1725,1734,1736,1742,1744,1750,1755,1760,1763,1764,1770,1774,1784,1785,1786,1798,1799,1800,1805,1809,1815,1817,1824,1840,1842,1849,1862,1868,1880,1881,1896,1897,1899,1905,1908,1909,1911,1918,1926,1928,1933,1935,1943,1950,1954,1969,1970,1971,1975,1976,1979,1990,2003,20010,2012,2015,2019,2027,2028,2056,2071,2078,2087,2089,2098,2103,2120,2124,2132,2133,2140,2155,2167]
for bol in symbols:
	characters.append(unicode(bol,'utf-8'))
out_dir = "/home/aditya/Desktop/dataset/Sample0"
inp_dir = "/home/aditya/Desktop/fonts"

l = os.listdir(inp_dir)

d = dict()
d2 = dict()

for yu in allow:
	d2[yu] = 1
for yu in penalty:
	d[yu] = 1
id = 1
for ch in characters:
	st = out_dir + str(id)
	os.makedirs(st)
	i = 1
	fin = 1
	pos = 0
	for x in l:
		if i > 1000:
			break
		if id < 100:
			file_name = "img0" + str(id) + "-"
		else:
			file_name = "img" + str(id) + "-"
		val = fin
		cnt = 0
		while val > 0:
			cnt = cnt + 1
			val = val/10
		for j in range(0,5-cnt):
			file_name = file_name + "0"
		file_name = file_name + str(i)
		im = Image.new("L", (128,128),255)
		draw = ImageDraw.Draw(im)
		pat = inp_dir+"/"+str(x)
		font = ImageFont.truetype(pat, 96)
		(font_width, font_height) = font.getsize(ch)
		# Calculate x position
		xx = (128 - font_width) / 2
		# Calculate y position
		y = (128 - font_height) / 2
		draw.text((xx, 0), ch, 0,font=font)
		f_name = st + "/" + file_name + ".png"
		im.save(f_name)
		i = i +1
		fin = fin + 1
	id = id + 1
